<?xml version="1.0" encoding="ISO-8859-1"?>
<!--

    Copyright (C) 2003-2007 eXo Platform SAS.

    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU Affero General Public License
    as published by the Free Software Foundation; either version 3
    of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, see<http://www.gnu.org/licenses/>.

-->
<configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.exoplaform.org/xml/ns/kernel_1_0.xsd http://www.exoplaform.org/xml/ns/kernel_1_0.xsd"
   xmlns="http://www.exoplaform.org/xml/ns/kernel_1_0.xsd">

  <component>
    <key>org.exoplatform.social.core.identity.IdentityManager</key>
    <type>org.exoplatform.social.core.identity.IdentityManager</type>
  </component>


  <component>
    <key>org.exoplatform.social.core.activitystream.ActivityManager</key>
    <type>org.exoplatform.social.core.activitystream.ActivityManager</type>
    <component-plugins>
      <component-plugin> 
        <name>OSHtmlSanitizer</name>
        <set-method>addProcessorPlugin</set-method>
        <type>org.exoplatform.social.core.activitystream.OSHtmlSanitizerProcessor</type>
        <init-params>
          <values-param>
            <name>allowedTags</name>
            <value>b</value>
            <value>i</value>
            <value>a</value>
            <value>span</value>
            <value>em</value>
            <value>strong</value>
            <value>p</value>
            <value>ol</value>
            <value>ul</value>
            <value>li</value>
            <value>br</value>
          </values-param>
        </init-params>
      </component-plugin>    
    </component-plugins>
  </component>
  
   <component>
    <type>org.exoplatform.social.core.LinkProvider</type>
  </component> 
  
  <component>
    <key>org.exoplatform.social.core.identity.model.PropertiesDefinition</key>
    <type>org.exoplatform.social.core.identity.model.PropertiesDefinition</type>
  </component>

  <component>
    <key>org.exoplatform.social.core.relationship.RelationshipManager</key>
    <type>org.exoplatform.social.core.relationship.RelationshipManager</type>
  </component>

  <component>
    <key>org.exoplatform.social.core.identity.IdentityProvider</key>
    <type>org.exoplatform.social.core.identity.impl.organization.OrganizationIdentityProvider</type>
  </component>
  
  <component>
    <key>org.exoplatform.social.core.identity.impl.organization.GroupIdentityProvider</key>
    <type>org.exoplatform.social.core.identity.impl.organization.GroupIdentityProvider</type>
  </component>  

   <component>
      <key>org.exoplatform.social.core.identity.JCRStorage</key>
      <type>org.exoplatform.social.core.identity.JCRStorage</type>
  </component>

  <component>
    <key>org.exoplatform.social.core.identity.ProfileConfig</key>
    <type>org.exoplatform.social.core.identity.ProfileConfig</type>
    <init-params>
      <values-param>
        <name>nodetype.emails</name>
        <value>exo:profileKeyValue</value>
      </values-param>
      <values-param>
        <name>nodetype.phones</name>
        <value>exo:profileKeyValue</value>
      </values-param>
      <values-param>
        <name>nodetype.ims</name>
        <value>exo:profileKeyValue</value>
      </values-param>
      <values-param>
        <name>nodetype.urls</name>
        <value>exo:profileKeyValue</value>
      </values-param>
      <values-param>
        <name>nodetype.address</name>
        <value>exo:profileAddress</value>
      </values-param>
      <values-param>
        <name>nodetype.experiences</name>
        <value>exo:profileExperience</value>
      </values-param>
      <values-param>
        <name>nodetype.education</name>
        <value>exo:profileEducation</value>
      </values-param>
      <values-param>
        <name>forceMultiValue</name>
        <value>xxxxxxxxxxxx</value>
      </values-param>
    </init-params>
  </component>

  <component>
    <key>org.exoplatform.social.core.identity.ProfileMapper</key>
    <type>org.exoplatform.social.core.identity.ProfileMapper</type>
  </component>
  
  
  <external-component-plugins>
	  <target-component>org.exoplatform.services.jcr.RepositoryService</target-component>      
	  <component-plugin> 
	    <name>add.social.nodeType</name>
	    <set-method>addPlugin</set-method>
	    <type>org.exoplatform.services.jcr.impl.AddNodeTypePlugin</type>
	    <init-params>
	      <values-param>
	        <name>autoCreatedInNewRepository</name>
	        <description>Node types configuration file</description>
	        <value>jar:/conf/portal/social-nodetypes.xml</value>
	      </values-param>
	    </init-params>
	  </component-plugin>
	</external-component-plugins>

<!--  <remove-configuration>org.exoplatform.services.scheduler.JobSchedulerService</remove-configuration> -->
</configuration>
